<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Para la más linda ❤️</title>
<style>
  html,body {margin:0;height:100%;background:#000;display:flex;align-items:center;justify-content:center;}
  canvas {
    width:100vw;height:100vh;
    image-rendering: pixelated;
    display:block;
    background:linear-gradient(#050a18,#0b0f26);
  }
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
const W=320,H=180;
canvas.width=W;canvas.height=H;
ctx.imageSmoothingEnabled=false;

// --- estrellas ---
const stars=[...Array(200)].map(()=>({x:Math.random()*W,y:Math.random()*H,s:Math.random()<0.7?1:2}));

// --- sprites gatitos detallados (16x16 pixel maps) ---
function drawSprite(map,px,py,scale=1,flip=false){
  ctx.save();
  if(flip){ctx.translate(px+map[0].length*scale,py);ctx.scale(-1,1);}
  map.forEach((row,y)=>{
    row.forEach((col,x)=>{
      if(col){ctx.fillStyle=col;ctx.fillRect(px+x*scale,py+y*scale,scale,scale);}
    });
  });
  ctx.restore();
}
// gris
const catGray=[
 [null,null,"#888","#888",null,null,"#fa9",null,null,"#888","#888",null],
 [null,"#888","#ccc","#ccc","#888",null,null,"#888","#ccc","#ccc","#888",null],
 ["#888","#ccc","#fff","#fff","#ccc","#888","#888","#ccc","#fff","#fff","#ccc","#888"],
 ["#888","#ccc","#000","#fff","#ccc","#888","#888","#ccc","#fff","#000","#ccc","#888"],
 ["#888","#ccc","#fff","#000","#ccc","#888","#888","#ccc","#000","#fff","#ccc","#888"],
 ["#888","#ccc","#fff","#fff","#ccc","#888","#888","#ccc","#fff","#fff","#ccc","#888"],
 [null,"#888","#ccc","#ccc","#888",null,null,"#888","#ccc","#ccc","#888",null],
 [null,null,"#888","#888",null,null,null,null,"#888","#888",null,null]
];
// naranja
const catOrange=catGray.map(r=>r.map(c=>{
  if(c==="#888")return"#c63";
  if(c==="#ccc")return"#f93";
  if(c==="#fff")return"#ffd";
  return c;
}));

// --- corazón ---
const heartPattern=[
 [0,1,1,0],
 [1,1,1,1],
 [1,1,1,1],
 [0,1,1,0],
 [0,0,1,0]
];
function drawHeart(x,y,s,color){
  ctx.fillStyle=color;
  heartPattern.forEach((row,yy)=>{
    row.forEach((v,xx)=>{
      if(v)ctx.fillRect(x+xx*s,y+yy*s,s,s);
    });
  });
}

// --- partículas ---
let parts=[];
function emit(x,y,color){
  const a=-Math.PI/2+(Math.random()-0.5)*1.2;
  const v=0.8+Math.random();
  parts.push({x,y,vx:Math.cos(a)*v,vy:Math.sin(a)*v-0.5,c:color,s:1+Math.random(),life:0,ttl:200,state:"free"});
}

// --- texto como destino ---
const phrase="para la más linda ❤️";
const off=document.createElement("canvas"),octx=off.getContext("2d");
function sampleTargets(){
  off.width=W*8;off.height=H*8;
  octx.clearRect(0,0,off.width,off.height);
  octx.font=`bold ${Math.floor(off.height*0.3)}px "Segoe UI Emoji","Arial"`;
  octx.textAlign="center";octx.textBaseline="middle";
  octx.fillStyle="white";octx.fillText(phrase,off.width/2,off.height/2);
  const d=octx.getImageData(0,0,off.width,off.height).data;
  const pts=[];
  for(let y=0;y<off.height;y+=2){
    for(let x=0;x<off.width;x+=2){
      if(d[(y*off.width+x)*4+3]>128){
        pts.push({x:Math.round(x/off.width*W),y:Math.round(y/off.height*H)});
      }
    }
  }
  return pts;
}
let targets=sampleTargets();

// --- animación ---
let t=0,mode="free",switchT=0;
function loop(){
  t++;
  if(mode==="free"&&t-switchT>300){assign();mode="text";switchT=t;}
  if(mode==="text"&&t-switchT>200){release();mode="free";switchT=t;}
  if(Math.random()<0.7)emit(W*0.2,H*0.8,"#f77");
  if(Math.random()<0.7)emit(W*0.8,H*0.8,"#ff7");
  update();render();requestAnimationFrame(loop);
}
function assign(){
  const sel=targets.slice(0,600);
  for(let i=0;i<sel.length;i++){
    if(parts[i]){parts[i].state="target";parts[i].tx=sel[i].x;parts[i].ty=sel[i].y;}
  }
}
function release(){for(let p of parts)p.state="free";}
function update(){
  for(let i=parts.length-1;i>=0;i--){
    let p=parts[i];p.life++;
    if(p.state==="free"){p.vy+=0.02;p.x+=p.vx;p.y+=p.vy;}
    else{p.vx+=(p.tx-p.x)*0.05;p.vy+=(p.ty-p.y)*0.05;p.vx*=0.7;p.vy*=0.7;p.x+=p.vx;p.y+=p.vy;}
    if(p.life>p.ttl)parts.splice(i,1);
  }
}
function render(){
  ctx.fillStyle="#000";ctx.fillRect(0,0,W,H);
  for(let s of stars)ctx.fillRect(s.x,s.y,s.s,s.s);
  drawSprite(catGray,40,H-40,2,false);
  drawSprite(catOrange,W-64,H-40,2,true);
  for(let p of parts)drawHeart(Math.round(p.x),Math.round(p.y),p.s,p.c);
}
loop();
</script>
</body>
</html>